<!--
  Copyright (c) 2013 Charles Hache. All rights reserved. 
  
  This file is part of the softlogger project.
  softlogger is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.
  
  softlogger is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the 
  GNU General Public License for more details.
  
  You should have received a copy of the GNU General Public License
  along with softlogger.  If not, see <http://www.gnu.org/licenses/>.
  
  Contributors:
      Charles Hache - initial API and implementation
-->
<!DOCTYPE softlogger SYSTEM "softlogger.dtd">
<softlogger>
	<name>Test Logger</name>
	<defaultScanRate>11111</defaultScanRate> <!-- default scan rate in milliseconds -->
	<server>
		<user>logger1</user>
		<host>127.0.0.1</host>
		<port>2222</port>
		<password>fakePass01</password> <!-- or <keyfile> element -->
		<!--
		<keyfile>ssh/id_rsa</keyfile>
		-->
		<configPoll>3600</configPoll>
		<homeFolder>/home/logger1/data</homeFolder>
	</server>
	<channel>
		<defaultScanRate>333</defaultScanRate> <!-- default scan rate for this channel, overrides Softlogger scan rate -->
		<tcp>
			<host>127.0.0.1</host>
			<port>5020</port>
		</tcp>
		<!--
		<serial>
			<comport>COM4</comport>
			<baud>19200</baud>
		</serial>
		-->
		<outputModule class="ca.brood.softlogger.dataoutput.DebugOutputModule">
			<configValue name="logInterval">1</configValue>
		</outputModule>
		<outputModule class="ca.brood.softlogger.dataoutput.CsvOutputModule">
			<configValue name="logInterval">1</configValue>
			<configValue name="newFilePeriod">1</configValue>
		</outputModule>
		<device>
			<!-- devices can each have a scan rate as well, which overrides their channel
			and softlogger default scan rates. -->
			<unitId>15</unitId>
			<description>DSI #1</description>
			<defaultScanRate>100</defaultScanRate>
			
			<configRegister>
				<fieldName>Config coil 1 true</fieldName>
				<registerAddress>000001</registerAddress>
				<value>true</value>
			</configRegister>
			<configRegister>
				<fieldName>Config value 1</fieldName>
				<registerAddress>400003</registerAddress>	<!-- Addresses can be of the form [0134][0-9]{4,5}.  The first digit indicates the type of register (input,output)*(coil,register). -->
				<size type="signed">2</size> <!-- size in words of the register. 2 and 4 are supported type=(s|u|f|)=(int|uint|float) -->
				<value>-5</value>	<!-- value for the config register, overwrite the device's register with this -->
			</configRegister>
			<dataRegister>
				<fieldName>Measurement 1</fieldName>
				<registerAddress>300001</registerAddress>
				<guid>D3M01</guid>
			</dataRegister>
			<dataRegister>
				<fieldName>Measurement 2</fieldName>
				<registerAddress>300003</registerAddress>
				<size>2</size>
				<dataFunction type="lookupTable">LUT1.dat</dataFunction>
				<guid>D3M02</guid>
			</dataRegister>
			<dataRegister>
				<fieldName>Measurement 3</fieldName>
				<scanRate sampling="sum"></scanRate>
				<registerAddress>300005</registerAddress>
				<size type="float">1</size>
				<guid>D3M03</guid>
			</dataRegister>
			<dataRegister>
				<fieldName>Measurement 4</fieldName>
				<registerAddress>400005</registerAddress>
				<size type="float">2</size>
				<dataFunction type="expression">PI*$*1000/sqrt(E)</dataFunction>
				<guid>D3M04</guid>
			</dataRegister>
			<dataRegister>
				<fieldName>Measurement 5</fieldName>
				<scanRate sampling="sum"></scanRate>
				<registerAddress>400007</registerAddress>
				<size type="float">2</size>
				<guid>D3M5</guid>
			</dataRegister>
			<dataRegister>
				<fieldName>Measurement 6</fieldName>
				<registerAddress>000001</registerAddress>
				<guid>D3M6</guid>
			</dataRegister>
			<dataRegister>
				<fieldName>Measurement 7</fieldName>
				<registerAddress>100001</registerAddress>
				<guid>D3M7</guid>
			</dataRegister>
			<dataRegister>
				<fieldName>Measurement 8</fieldName>
				<scanRate sampling="latest"></scanRate>
				<registerAddress>400003</registerAddress>
				<size type="signed">2</size>
				<guid>D3M8</guid>
			</dataRegister>
		</device>
	</channel>
</softlogger>
